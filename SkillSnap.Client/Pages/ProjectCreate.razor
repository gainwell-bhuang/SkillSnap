@page "/projectcreate"
@using SkillSnap.Shared.Models
@inject ProjectService ProjectService
@inject NavigationManager Navigation

<h3 class="mb-4" style="font-size: 2rem;">Create Project</h3>
<EditForm Model="project" OnValidSubmit="HandleCreate">
    <div class="mb-3">
        <label class="form-label" style="font-weight: 500;">Title</label>
        <InputText @bind-Value="project.Title" class="form-control form-control-lg" placeholder="Title" />
    </div>
    <div class="mb-3">
        <label class="form-label" style="font-weight: 500;">Description</label>
        <InputTextArea @bind-Value="project.Description" class="form-control" placeholder="Description" style="min-height: 120px;" />
    </div>
    <div class="d-flex gap-2 mt-4">
        <button class="btn btn-success px-4" type="submit" style="font-size: 1.1rem;">Create</button>
        <button class="btn btn-secondary px-4" type="button" @onclick="@(() => Navigation.NavigateTo("/projectlist", true))" style="font-size: 1.1rem;">Cancel</button>
    </div>
</EditForm>

@code {
    private Project project = new();

    private async Task HandleCreate()
    {
        await ProjectService.AddProjectAsync(project);
        Navigation.NavigateTo("/projectlist", true); // force reload to refresh data
    }
}
